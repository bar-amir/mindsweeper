
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Parsers &#8212; Mindsweeper  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Readers" href="readers.html" />
    <link rel="prev" title="Drivers" href="drivers.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="readers.html" title="Readers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="drivers.html" title="Drivers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mindsweeper  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-mindsweeper">
<span id="parsers"></span><h1>Parsers<a class="headerlink" href="#module-mindsweeper" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-mindsweeper.parsers"></span><p>This module offers methods to use parsers in various ways, and a framework for implementing your own parsers.</p>
<dl class="py function">
<dt id="mindsweeper.parsers.parse">
<code class="sig-prename descclassname">mindsweeper.parsers.</code><code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parser_name</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mindsweeper.parsers.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the data found in the file <cite>path</cite> with the parser <cite>parser_name</cite> (string).</p>
</dd></dl>

<dl class="py function">
<dt id="mindsweeper.parsers.run_parser">
<code class="sig-prename descclassname">mindsweeper.parsers.</code><code class="sig-name descname">run_parser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parser_name</span></em>, <em class="sig-param"><span class="n">message_queue_url</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mindsweeper.parsers.run_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to message queue and start the parser as a service.</p>
</dd></dl>

<div class="section" id="implementing-parsers">
<h2>Implementing parsers<a class="headerlink" href="#implementing-parsers" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Adding your own parsers is relatively easy. Implement the logic of your parser inside a function <code class="docutils literal notranslate"><span class="pre">parser_name</span></code>, that receives a message, parses it and returns the parsed message. Save the function in a file called <code class="docutils literal notranslate"><span class="pre">parser_&lt;parser_name&gt;.py</span></code>, and place the file in the parsers module directory. The file should also contain a <code class="docutils literal notranslate"><span class="pre">msg_types</span></code> set of the message types your parser accepts. If all of this is done correctly, the server will publish these types of received messages to the parser’s queue.</p></li>
<li><p>The parser needs to change the message status to ‘ready’ in order for the output message to be consumed by the saver. You could decide not to do so, but instead change the message type, allowing a message to be passed through a chain of parsers before being saved to the database.</p></li>
</ul>
</div>
<div class="section" id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this headline">¶</a></h2>
<div class="section" id="python-m-mindsweeper-parsers">
<h3>python -m mindsweeper.parsers<a class="headerlink" href="#python-m-mindsweeper-parsers" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python -m mindsweeper.parsers <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...
</pre></div>
</div>
<div class="section" id="python-m-mindsweeper-parsers-parse">
<h4>parse<a class="headerlink" href="#python-m-mindsweeper-parsers-parse" title="Permalink to this headline">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python -m mindsweeper.parsers parse <span class="o">[</span>OPTIONS<span class="o">]</span> PARSER_NAME PATH
</pre></div>
</div>
<p class="rubric">Arguments</p>
<dl class="std option">
<dt id="cmdoption-python-m-mindsweeper.parsers-parse-arg-PARSER_NAME">
<code class="sig-name descname">PARSER_NAME</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-python-m-mindsweeper.parsers-parse-arg-PARSER_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-python-m-mindsweeper.parsers-parse-arg-PATH">
<code class="sig-name descname">PATH</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-python-m-mindsweeper.parsers-parse-arg-PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="python-m-mindsweeper-parsers-run-parser">
<h4>run-parser<a class="headerlink" href="#python-m-mindsweeper-parsers-run-parser" title="Permalink to this headline">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python -m mindsweeper.parsers run-parser <span class="o">[</span>OPTIONS<span class="o">]</span> PARSER_NAME
                                         MESSAGE_QUEUE_URL
</pre></div>
</div>
<p class="rubric">Arguments</p>
<dl class="std option">
<dt id="cmdoption-python-m-mindsweeper.parsers-run-parser-arg-PARSER_NAME">
<code class="sig-name descname">PARSER_NAME</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-python-m-mindsweeper.parsers-run-parser-arg-PARSER_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-python-m-mindsweeper.parsers-run-parser-arg-MESSAGE_QUEUE_URL">
<code class="sig-name descname">MESSAGE_QUEUE_URL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-python-m-mindsweeper.parsers-run-parser-arg-MESSAGE_QUEUE_URL" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Parsers</a><ul>
<li><a class="reference internal" href="#implementing-parsers">Implementing parsers</a></li>
<li><a class="reference internal" href="#cli">CLI</a><ul>
<li><a class="reference internal" href="#python-m-mindsweeper-parsers">python -m mindsweeper.parsers</a><ul>
<li><a class="reference internal" href="#python-m-mindsweeper-parsers-parse">parse</a></li>
<li><a class="reference internal" href="#python-m-mindsweeper-parsers-run-parser">run-parser</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="drivers.html"
                        title="previous chapter">Drivers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="readers.html"
                        title="next chapter">Readers</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/parsers.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="readers.html" title="Readers"
             >next</a> |</li>
        <li class="right" >
          <a href="drivers.html" title="Drivers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mindsweeper  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Bar Amir.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.
    </div>
  </body>
</html>